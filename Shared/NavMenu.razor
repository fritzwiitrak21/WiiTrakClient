@using WiiTrakClient.Services
@using WiiTrakClient.Cores
@inject IJSRuntime JSRuntime

<MudDivider Class="mb-4" />
<MudNavMenu>
  
    @if (UserView == "All" || UserView == "WiiTrak")
    {
            @*<MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">WiiTrak</MudText>
            <MudNavLink Href="/companies" Icon="@Icons.Material.Outlined.ViewList">Companies</MudNavLink>
            <MudNavLink Href="/technicians" Icon="@Icons.Material.Outlined.ViewList">Technicians</MudNavLink>
            <MudNavLink Href="/tracking-devices" Icon="@Icons.Material.Outlined.ViewList">Tracking Devices</MudNavLink>*@

            <MudNavLink Href="/" Icon="@Icons.Material.Outlined.ManageAccounts" hidden="hidden">System Admin</MudNavLink>
            <MudNavLink Href="/corporates" Icon="@Icons.Filled.Apartment">Corporates</MudNavLink>
            <MudNavLink Href="/companies" Icon="@Icons.Filled.Business">Companies</MudNavLink>
            <MudNavLink Href="/system-owner-stores" Icon="@Icons.Material.Outlined.Store">Stores</MudNavLink>
            <MudNavLink Href="/system-owner-driver" Icon="@Icons.Filled.GroupAdd">Drivers</MudNavLink>
            <MudNavLink Href="/technicians" Icon="@Icons.Material.Outlined.Handyman">Technician</MudNavLink>
            <MudNavLink Href="/systemowner-driver-store" Icon="@Icons.Outlined.PersonAddAlt">Assign Drivers</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.BarChart" hidden="hidden">Sales</MudNavLink>
            <MudNavLink Href="/systemowner-delivery-tickets" Icon="@Icons.Material.Outlined.FactCheck">Deliveries</MudNavLink>
            <MudNavLink Href="/trackingdevice-details" Icon="@Icons.Material.Outlined.ViewList">Tracking Devices</MudNavLink>
            <MudNavLink Href="/county-code" Icon="@Icons.Material.Outlined.AddLocation">County Code</MudNavLink>

            <MudNavGroup Title="Inventory" Expanded="false" Icon="@Icons.Material.Outlined.Inventory" hidden="hidden">
            <MudNavLink Href="/company-carts" Icon="@Icons.Material.Outlined.ShoppingCart" hidden="hidden" >Cart In</MudNavLink>
            <MudNavLink Href="/company-carts" Icon="@Icons.Outlined.ShoppingCart" hidden="hidden">Cart Out</MudNavLink>
            </MudNavGroup>

            

            <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Others</MudText>

            <MudNavLink Href="" Icon="@Icons.Material.Outlined.Construction" hidden="hidden">Repair</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.WarningAmber" hidden="hidden">Missing</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.AttachMoney" hidden="hidden">Billing</MudNavLink>
            <MudNavLink Href="/messages-list" Icon="@Icons.Outlined.Message">Message</MudNavLink>
            <MudNavLink Href="/report" Icon="@Icons.Outlined.Description">Ad Hoc Report</MudNavLink>
            <MudNavLink Href="/service-board" Icon="@Icons.Outlined.BarChart">Service Board Report</MudNavLink>

    }

    @if (UserView == "All" || UserView == "Corporate")
    {
            @*<MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Corporate</MudText>
            <MudNavLink Href="/corporate-carts" Icon="@Icons.Material.Outlined.ViewList">Carts</MudNavLink>*@

            <MudNavLink Href="/corporate-carts" Icon="@Icons.Material.Outlined.Inventory" hidden="hidden">Inventory</MudNavLink>

            <MudNavLink Href="/prime-companies" Icon="@Icons.Material.Outlined.ManageAccounts">Companies</MudNavLink>
            <MudNavLink Href="/corporate-stores" Icon="@Icons.Material.Outlined.Store">Stores</MudNavLink>
            <MudNavLink Href="/corporate-delivery-tickets" Icon="@Icons.Material.Outlined.FactCheck">Deliveries</MudNavLink>
          


            <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Others</MudText>

            <MudNavLink Href="" Icon="@Icons.Material.Outlined.Construction" hidden="hidden">Repair</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.WarningAmber" hidden="hidden">Missing</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Outlined.LocationCity" hidden="hidden">District</MudNavLink>
            <MudNavLink Href="/messages-list" Icon="@Icons.Outlined.Message">Message</MudNavLink>
            <MudNavLink Href="/report" Icon="@Icons.Outlined.Description">Ad Hoc Report</MudNavLink>
            <MudNavLink Href="/service-board" Icon="@Icons.Outlined.BarChart">Service Board Report</MudNavLink>
    }

    @if (UserView == "All" || UserView == "PrimeCompany")
    {
           @* <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Primary Company</MudText>
            <MudNavLink Href="/company-carts" Icon="@Icons.Material.Outlined.ViewList">Carts</MudNavLink>
            <MudNavLink Href="/sub-companies" Icon="@Icons.Material.Outlined.ViewList">Sub Contractors</MudNavLink>
            <MudNavLink Href="/drivers" Icon="@Icons.Material.Outlined.ViewList">Drivers</MudNavLink>
            <MudNavLink Href="/company-technicians" Icon="@Icons.Material.Outlined.ViewList">Technicians</MudNavLink>*@

            @*<MudNavLink Href="" Icon="@Icons.Material.Outlined.CorporateFare">Corparate</MudNavLink>*@
           <MudNavLink Href="/company-corporates" Icon="@Icons.Filled.CorporateFare">Corporates</MudNavLink>
            <MudNavLink Href="/sub-companies" Icon="@Icons.Material.Outlined.ManageAccounts">Companies</MudNavLink>
             <MudNavLink Href="/drivers" Icon="@Icons.Filled.GroupAdd">Drivers</MudNavLink>
             <MudNavLink Href="/company-driver-store" Icon="@Icons.Outlined.PersonAddAlt">Assign Driver</MudNavLink>
              <MudNavLink Href="/company-stores" Icon="@Icons.Material.Outlined.Store">Stores</MudNavLink>
              <MudNavLink Href="/company-technicians" Icon="@Icons.Material.Outlined.Handyman">Technicians</MudNavLink>
            <MudNavLink Href="/company-carts" Icon="@Icons.Material.Outlined.Inventory" hidden="hidden">Inventory</MudNavLink>
            <MudNavLink Href="/company-delivery-tickets" Icon="@Icons.Material.Outlined.FactCheck">Deliveries</MudNavLink>
            

            <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Others</MudText>

            <MudNavLink Href="" Icon="@Icons.Material.Outlined.Construction" hidden="hidden">Repair</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.WarningAmber" hidden="hidden">Missing</MudNavLink>
            
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.AttachMoney" hidden="hidden">Billing</MudNavLink>
            <MudNavLink Href="/messages-list" Icon="@Icons.Outlined.Message">Message</MudNavLink>
            <MudNavLink Href="/report" Icon="@Icons.Outlined.Description">Ad Hoc Report</MudNavLink>
            <MudNavLink Href="/service-board" Icon="@Icons.Outlined.BarChart">Service Board Report</MudNavLink>
    }

    @if (UserView == "All" || UserView == "SubContractor")
    {
            @*<MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Sub Contractor</MudText>
            <MudNavLink Href="/company-carts" Icon="@Icons.Material.Outlined.ViewList">Carts</MudNavLink>
            <MudNavLink Href="/sub-companies" Icon="@Icons.Material.Outlined.ViewList">Sub Contractors</MudNavLink>
            <MudNavLink Href="/service-providers" Icon="@Icons.Material.Outlined.ViewList">Service Providers</MudNavLink>
            <MudNavLink Href="/drivers" Icon="@Icons.Material.Outlined.ViewList">Drivers</MudNavLink>
            <MudNavLink Href="/company-technicians" Icon="@Icons.Material.Outlined.ViewList">Technicians</MudNavLink>*@

            
            <MudNavLink Href="/company-corporates" Icon="@Icons.Filled.CorporateFare">Corporates</MudNavLink>
            <MudNavLink Href="/drivers" Icon="@Icons.Filled.GroupAdd">Drivers</MudNavLink>
            <MudNavLink Href="/company-carts" Icon="@Icons.Material.Outlined.Inventory" hidden="hidden">Inventory</MudNavLink>
            <MudNavLink Href="/company-driver-store" Icon="@Icons.Outlined.PersonAddAlt">Assign Driver</MudNavLink>
            <MudNavLink Href="/company-stores" Icon="@Icons.Material.Outlined.Store">Stores</MudNavLink>
          
            <MudNavGroup Title="Inventory" Expanded="false" Icon="@Icons.Material.Outlined.Inventory" hidden="hidden">
            <MudNavLink Href="/company-carts" Icon="@Icons.Material.Outlined.ShoppingCart" hidden="hidden">Cart In</MudNavLink>
            <MudNavLink Href="/company-carts" Icon="@Icons.Outlined.ShoppingCart" hidden="hidden">Cart Out</MudNavLink>
            </MudNavGroup>
            <MudNavLink Href="/company-delivery-tickets" Icon="@Icons.Material.Outlined.FactCheck">Deliveries</MudNavLink>

            
            <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Others</MudText>

            <MudNavLink Href="" Icon="@Icons.Material.Outlined.Construction" hidden="hidden">Repair</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.AttachMoney" hidden="hidden">Billing</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.WarningAmber" hidden="hidden">Missing</MudNavLink>
            <MudNavLink Href="/messages-list" Icon="@Icons.Outlined.Message">Message</MudNavLink>
            <MudNavLink Href="/report" Icon="@Icons.Outlined.Description">Ad Hoc Report</MudNavLink>
            <MudNavLink Href="/service-board" Icon="@Icons.Outlined.BarChart">Service Board Report</MudNavLink>

    }

    @if (UserView == "All" || UserView == "Driver")
    {
            @*<MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Driver</MudText>*@

           @* <MudNavLink Href="/driver-carts" Icon="@Icons.Material.Outlined.ShoppingCart">Carts</MudNavLink>
            <MudNavLink Href="/driver-delivery-tickets" Icon="@Icons.Material.Outlined.ViewList">Delivery Tickets</MudNavLink>
            <MudNavLink Href="/driver-workorders" Icon="@Icons.Material.Outlined.ViewList">Work Orders</MudNavLink>*@

             <MudNavLink Href="/driver-carts" Icon="@Icons.Material.Outlined.ShoppingCart" hidden="hidden">List of Carts</MudNavLink>
             <MudNavLink Href="/driver-carts" Icon="@Icons.Material.Outlined.Map" hidden="hidden">Map</MudNavLink>
             <MudNavLink Href="/driver-carts" Icon="@Icons.Outlined.LocalShipping" hidden="hidden">On Truck</MudNavLink>

            <MudNavLink Href="/driver-delivery-tickets" Icon="@Icons.Material.Outlined.FactCheck">Deliveries</MudNavLink>
            <MudNavLink Href="/driver-stores" Icon="@Icons.Material.Outlined.Store">Stores</MudNavLink>
            <MudNavLink Href="/driver-carts-location" Icon="@Icons.Material.Outlined.ShoppingCart">Carts</MudNavLink>
            <MudNavLink Href="/driver-workorders" Icon="@Icons.Material.Outlined.Add" hidden="hidden">Add Equipment</MudNavLink>

            <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Others</MudText>

             <MudNavLink Href="" Icon="@Icons.Material.Outlined.History" hidden="hidden">History</MudNavLink>
             <MudNavLink Href="" Icon="@Icons.Material.Outlined.AttachMoney" hidden="hidden">Billing</MudNavLink>
             <MudNavLink Href="" Icon="@Icons.Material.Outlined.Message" hidden="hidden">Message</MudNavLink>
             <MudNavLink Href="/report" Icon="@Icons.Outlined.Description">Ad Hoc Report</MudNavLink>
    }

    @* <MudNavLink Href="#" Icon="@Icons.Material.Outlined.Store">Stores</MudNavLink> *@

    @if (UserView == "All" || UserView == "Store")
    {
            @*<MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Store</MudText>
            <MudNavLink Href="/store-carts" Icon="@Icons.Material.Outlined.ShoppingCart">Carts</MudNavLink>
            <MudNavLink Href="/store-delivery-tickets" Icon="@Icons.Material.Outlined.ViewList">Delivery Tickets</MudNavLink>*@
            <MudNavLink Href="/store-delivery-tickets" Icon="@Icons.Material.Outlined.ViewList">Deliveries</MudNavLink>
            <MudNavLink Href="/store-carts" Icon="@Icons.Material.Outlined.ShoppingCart" hidden="hidden">Shopping Carts</MudNavLink>
            <MudNavLink Href="/carts" Icon="@Icons.Material.Outlined.AddShoppingCart">Carts</MudNavLink>
            @*<MudNavLink Href="/sim-card" Icon="@Icons.Material.Outlined.SimCard">Sim Card</MudNavLink>
            <MudNavLink Href="/devices" Icon="@Icons.Material.Outlined.PermDeviceInformation">Device</MudNavLink>*@
            <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Others</MudText>

            <MudNavLink Href="" Icon="@Icons.Material.Outlined.Construction" hidden="hidden">Repair</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.WarningAmber" hidden="hidden">Missing</MudNavLink>
            <MudNavLink Href="" Icon="@Icons.Material.Outlined.Store" hidden="hidden">Store</MudNavLink>
            <MudNavLink Href="/messages-list" Icon="@Icons.Outlined.Message">Message</MudNavLink>
            <MudNavLink Href="/report" Icon="@Icons.Outlined.Description">Ad Hoc Report</MudNavLink>
            <MudNavLink Href="/service-board" Icon="@Icons.Outlined.BarChart">Service Board Report</MudNavLink>

    }

    @if (UserView == "All" || UserView == "ServiceProvider")
    {
            <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Service Provider</MudText> 
            <MudNavLink Href="/stores" Icon="@Icons.Material.Outlined.Store">Stores</MudNavLink>
    }

    @if (UserView == "All" || UserView == "Technician")
    {
            @*<MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Technician</MudText>
            <MudNavLink Href="#" Icon="@Icons.Material.Outlined.ShoppingCart">Carts</MudNavLink>
            <MudNavLink Href="#" Icon="@Icons.Material.Outlined.ViewList">Work Orders</MudNavLink> *@ 
            
            <MudNavLink Href="/sim-card" Icon="@Icons.Material.Outlined.SimCard">Sim Card</MudNavLink>
            <MudNavLink Href="/devices" Icon="@Icons.Material.Outlined.PermDeviceInformation">Devices</MudNavLink>
            <MudNavLink Href="/technician-carts" Icon="@Icons.Material.Outlined.ShoppingCart">Carts</MudNavLink>
    }

    @*<MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Communication</MudText>
    <MudNavLink Href="#" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Outlined.Email">Email</MudNavLink>
    <MudNavLink Href="#" Icon="@Icons.Material.Outlined.Textsms">Text Messages</MudNavLink>
    <MudNavLink Href="#" Icon="@Icons.Material.Outlined.Forum">Chat</MudNavLink>

    <MudText Typo="Typo.subtitle2" Color="Color.Inherit" Class="ml-4 my-3">Pages</MudText>
    <MudNavGroup Title="Authentication" Icon="@Icons.Material.Outlined.AssignmentInd" HideExpandIcon="true">
        <MudNavLink Href="/" Icon="@Icons.Material.Outlined.InsertDriveFile">Login</MudNavLink>
        <MudNavLink Href="#" Icon="@Icons.Material.Outlined.InsertDriveFile">Register</MudNavLink>
        <MudNavLink Href="#" Icon="@Icons.Material.Outlined.InsertDriveFile">Forgot Password</MudNavLink>
        <MudNavLink Href="#" Icon="@Icons.Material.Outlined.InsertDriveFile">Reset Password</MudNavLink>
    </MudNavGroup>
    <MudNavGroup Title="Error" Icon="@AlertAssignmentIcon" HideExpandIcon="true">
        <MudNavLink Href="pages/error/404" Icon="@Icons.Material.Outlined.InsertDriveFile">404</MudNavLink>
    </MudNavGroup>
    <MudNavGroup Title="Utility" Icon="@Icons.Material.Outlined.Assignment" HideExpandIcon="true">
        <MudNavLink Href="pages/utility/faq" Icon="@Icons.Material.Outlined.InsertDriveFile">Faq</MudNavLink>
    </MudNavGroup>
    <MudNavLink Href="/claims" Icon="@Icons.Material.Outlined.InsertDriveFile">Claims</MudNavLink>  *@  
</MudNavMenu>

@code {


    string UserView = "";
    private IJSObjectReference _jsModules;
    string AlertAssignmentIcon { get; set; } = "<path d=\"M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H9.18C9.6,1.84 10.7,1 12,1C13.3,1 14.4,1.84 14.82,3H19M12,3A1,1 0 0,0 11,4A1,1 0 0,0 12,5A1,1 0 0,0 13,4A1,1 0 0,0 12,3M7,7V5H5V19H19V5H17V7H7M11,9H13V13.5H11V9M11,15H13V17H11V15Z\" />";
    protected override async Task OnInitializedAsync()
    {
        try
        {
            _jsModules = await JSRuntime.InvokeAsync<IJSObjectReference>("import", "./js/localstorage.js");
            var id = await _jsModules.InvokeAsync<string>("getUserId");
            CurrentUser.UserId = new Guid(id);
            CurrentUser.UserName = await _jsModules.InvokeAsync<string>("getUserName");
            CurrentUser.UserRole = await _jsModules.InvokeAsync<string>("getUserRole");
            var roleid = await _jsModules.InvokeAsync<string>("getUserRoleId");
            CurrentUser.UserRoleId = Convert.ToInt32(roleid);

        }
        catch (Exception ex)
        {
            
        }
        UserView = CurrentUser.UserRole;
       
    }
} 